
@using MaleFashionApp.Entities
@using MaleFashionApp.ViewModels

@{
    var viewModel = (BlogViewModel)Model;
    
}

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__text">
                    <h4>About Us</h4>
                    <div class="breadcrumb__links">
                        <a href="/">Home</a>
                        <span>About Us</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<!-- About Section Begin -->
<section class="about spad">
    <div class="container">
        <div class="row">
            <div class="col-9" data-aos="fade-up" data-aos-delay="100">
                <!-- Blog Section Begin -->
                <section class="blog spad">
                    <div class="container">
                        <div class="row">
                            @foreach (Post onePost in viewModel.Posts)
                            {
                                <div class="col-lg-4 col-md-6 col-sm-6">
                                    <div class="blog__item">
                                        <div class="blog__item__pic set-bg"
                                             data-setbg="@Url.Content("~/" + onePost.ImgSrc)">
                                        </div>

                                        <div class="blog__item__text">
                                            <span>@onePost.Published</span>
                                            <h5>@onePost.Title</h5>
                                            <a href="/blog/GetOnePost?slug=@onePost.Slug">Read More</a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </section>
                <!-- Blog Section End -->


                <!-- Pagination -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__pagination text-center mt-4">
                            @{
                                var query = "";

                                if (!string.IsNullOrEmpty(Context.Request.Query["category"]))
                                {
                                    query += $"&category={Context.Request.Query["category"]}";
                                }
                                if (!string.IsNullOrEmpty(Context.Request.Query["tag"]))
                                {
                                    query += $"&tag={Context.Request.Query["tag"]}";
                                }
                                if (!string.IsNullOrEmpty(Context.Request.Query["search"]))
                                {
                                    query += $"&search={Context.Request.Query["search"]}";
                                }
                            }

                            @if (Model.CurrentPage > 1)
                            {
                                <a href="/blog/index?page=@(Model.CurrentPage - 1)@query">«</a>
                            }

                            @for (int j = 1; j <= Model.TotalPages; j++)
                            {
                                <a class="@(j == Model.CurrentPage ? "active" : "")"
                                   href="/blog/index?page=@j@query">
                                    @j
                                </a>
                            }

                            @if (Model.CurrentPage < Model.TotalPages)
                            {
                                <a href="/blog/index?page=@(Model.CurrentPage + 1)@query">»</a>
                            }
                        </div>
                    </div>
                </div>

                
            </div>
            <div class="col-3" data-aos="fade-up" data-aos-delay="100">
                
                @* Search Input *@
                <div class="shop__sidebar__search">
                    <form method="get" action="/blog/index">
                        <input type="text" name="search" placeholder="Search...">
                        <button type="submit">
                            <span class="icon_search"></span>
                        </button>
                    </form>
                </div>
                
                @* Categories Rendering *@
                <div class="shop__sidebar__accordion">
                    <div class="accordion" id="accordionExample">

                        @{
                            int i = 0;
                        }

                        @foreach (Category oneCat in viewModel.Categories)
                        {
                            var collapseId = "collapseCat" + i;

                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#@collapseId">
                                        @oneCat.Title
                                    </a>
                                </div>

                                <div id="@collapseId" class="collapse" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                @foreach (Category childCat in oneCat.Childs)
                                                {
                                                    <li>
                                                        <a href="/blog/index/category?=@childCat.Slug">@childCat.Title</a>
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            i++;
                        }

                    </div>
                </div>

                @* Tags Rendering *@
                <div class="shop__sidebar__categories">
                    <div class="shop__sidebar__categories shop__sidebar__tags">
                        <h5 class="sidebar-title">Tags</h5>

                        <ul class="tag-list">
                            @foreach (Tag oneTag in viewModel.Tags)
                            {
                                <li>
                                    <a class="tag-item" href="/blog/index?tag=@oneTag.Slug">
                                        @oneTag.Title
                                    </a>
                                </li>
                            }
                        </ul>
                    </div>
                </div>


            </div>

        </div>
    </div>
</section>
<!-- About Section End -->

